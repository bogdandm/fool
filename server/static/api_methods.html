<!DOCTYPE html>
<html>
<head lang="en">
	<meta charset="UTF-8">
    <link rel="shortcut icon" href="/static/favicon.ico">
	<title></title>
	<style>
		pre {
			padding: 5px;
			background-color: #e2e2e2;
		}

		.note {
			display: inline-block;
			padding: 10px;
			background-color: #f3ff63;
			border-left: 5px solid #707070;
		}

		.old {
			background-color: #fa7777;
		}

		.tmp {
			background-color: #f3ff63;
		}
	</style>
</head>
<body>
<div class="note">
По SSE-каналу возвращается json-файл вида:
<pre><code>{ data: [< Change >, ...]}
< Change > = {
	"card": Card,
	"inf": int,
	"player": 0|1,
	"type": < Type >
}
< Type > = player_switch | take_cards | get_card | trump_card | attack | defense | table_clear</code></pre>
</div>
<ul>
	<li>api.subscribe() - канал для передачи изменений (см. серый блок выше)</li>
	<li>api.unsubscribe() - удаляет канал на сервере</li>
	<li>api.join(mode: PvP=1|PVE=0) - добавляет игрока в случайную комнату, указанного типа.
		В случае PvP может быть без второго игрока и необходимо будет ждать его.
		Если комната готова к началу игры, то будет послано SSE сообщение</li>
	<li><span class="old">api.init() - генерирует SSE сообщение в начале игры</span></li>
	<li><span class="tmp">api.create_session() - создает объект сессии и устанавливает куки</span></li>
	<li>api.attack(card: int) - изменяет состояние игры и генерирует SSE сообщение</li>
	<li>api.defense(card: int) - изменяет состояние игры и генерирует SSE сообщение</li>
</ul>
</body>
